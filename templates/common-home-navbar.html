{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{% static 'styles/common-home-navbar.css' %}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <header class="navbar">
      <div class="navbar-content">
        <div class="left-content">
          <div class="logo">AutofleetX</div>
          <div class="hero-line">
            Business rentals with AutoFleetX: Subscribe now
          </div>
        </div>
        <div class="right-content">
          <button
            class="hamburger"
            onclick="toggleMobileMenu()"
            type="button"
            aria-label="Toggle menu"
          >
            <i class="fas fa-bars"></i>
          </button>

          <!-- NAV BUTTONS HERE -->
          <div class="nav-buttons" id="mobileMenu">
            {% if not user.is_authenticated %} 
            <button onclick="window.location.href='{% url 'contact_us' %}#contact-form'" >
            
              <i class="fas fa-comment-dots"></i> Contact Us
            </button>
            <button
              onclick="window.location.href='{% url 'home' %}#overview-fleets'"
            >
              <i class="fas fa-car"></i> Overview
            </button>
            <button onclick="window.location.href='{% url 'login' %}'"  class="logout-button" >
              <i class="fas fa-right-to-bracket"></i> Login
            </button>
            {% endif %} 


   
            {% if user.is_authenticated %}
            <button
              onclick="window.location.href='{% url 'home' %}#overview-fleets'"
            >
              <i class="fas fa-car"></i> Overview
            </button> 
            <button
              onclick="window.location.href='{% url 'contact_us' %}#contact-form'"
            >
              <i class="fas fa-comment-dots"></i> Contact Us
            </button>
            {% if not user.is_superuser and not user.email %}
            <button onclick="window.location.href='{% url 'link_google' %}'"   >
              <i class="fab fa-google"></i> Connect Google
            </button>
            {% elif user.email %}
              {% if not user.has_usable_password %}
                <button onclick="window.location.href='{% url 'pass-manager' %}'" class="set-password-btn">
                   <i class="fas fa-key"></i> Set Password
                </button>
              {% else %}
                <button onclick="window.location.href='{% url 'profile' %}#profile-section' " >
                    ðŸ‘¤ï¸Ž User Profile
                </button>  
              {% endif %}  
            {% endif %}
            <button onclick="confirmLogout()" class="logout-button">
              <i class="fas fa-right-to-bracket"></i> Logout
            </button>
            
            
            {% endif %}
          </div>
        </div>

        <!-- right-content ended -->
      </div>
    </header>
    <div id="logoutModal" class="modal-overlay">
      <div class="modal-box">
        <p>Are you sure you want to log out?</p>
        <div class="modal-actions">
          <form method="POST" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="btn-confirm">Yes, Logout</button>
          </form>
          <button type="button" onclick="closeLogoutModal()" class="btn-cancel">
            Cancel
          </button>
        </div>
      </div>
    </div>
    <script>
      function confirmLogout() {
        document.getElementById("logoutModal").style.display = "flex";
      }

      function closeLogoutModal() {
        document.getElementById("logoutModal").style.display = "none";
      }
      function toggleMobileMenu() {
        const menu = document.getElementById("mobileMenu");
        menu.classList.toggle("show");
      }
    </script>
    {% for message in messages %} 

    {% if "account-created" in message.tags %}

    <div class="alert alert-success">{{ message }}</div>

    {% elif "google-linked" in message.tags %}
    <div class="alert alert-success">{{ message }}</div>

    {% elif "google-linked-failed" in message.tags %}
    <div class="alert alert-error">{{ message }}</div>  

    {% elif "email-required" in message.tags %} 
    <div class="alert alert-error">{{ message }}</div>  

    {% elif "invalid-signup" in message.tags %} 
    <div class="alert alert-error">{{ message }}</div> 

    {% elif "pass-created" in message.tags %}
    <div class="alert alert-success">{{ message }}</div>

    {% elif "password-setting-failed" in message.tags %}
    <div class="alert alert-error">{{ message }}</div> 

    {% elif "pass-changed" in message.tags %}
    <div class="alert alert-success">{{ message }}</div>  

    {% endif %} 

    {% endfor %}
    <div class="fleets-container">
       

      <button
        class="our-fleets-btn"
        onclick="window.location.href='{% url 'all-cars' scroll_to_section=0 %}'"
      >
        <i class="fas fa-bars"></i> Our Fleets
      </button>

      
    </div>

    {% include 'common-search-form.html' %}
  </body>
</html>
